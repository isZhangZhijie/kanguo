require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([10],{132:function(t,e,i){"use strict";var a=c(i(1)),o=c(i(133));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(o.default))},133:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(135),o=i.n(a),c=i(136),n=!1;var r=function(t){n||i(134)},s=i(0)(o.a,c.a,r,null,null);s.options.__file="D:\\myProject\\kanguoApp\\kanguo\\pages\\wode\\bianji\\bianji.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] bianji.vue: functional components are not supported with templates, they should use render functions."),e.default=s.exports},134:function(t,e){},135:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=t.getSystemInfoSync(),a=i.screenWidth,o=void 0,c=void 0,n=(i.pixelRatio,void 0),r=void 0,s=void 0,p=void 0,u=void 0,h=void 0,l=void 0,d=100,v=i.screenWidth;e.default={data:function(){return{name:"张志杰",imageSrc:"",isShowImg:!1,cropperInitW:a,cropperInitH:a,cropperW:a,cropperH:a,cropperL:0,cropperT:0,transL:0,transT:0,scaleP:0,imageW:0,imageH:0,cutL:0,cutT:0,cutB:a,cutR:"100%",qualityWidth:v,innerAspectRadio:1}},onLoad:function(t){},mounted:function(){},methods:{setData:function(t){var e=this;Object.keys(t).forEach(function(i){e.$set(e.$data,i,t[i])})},getImage:function(){var e=this;t.chooseImage({success:function(t){e.setData({imageSrc:t.tempFilePaths[0]}),e.loadImage()}})},loadImage:function(){var e=this;t.showLoading({title:"图片加载中..."}),t.getImageInfo({src:e.imageSrc,success:function(i){(u=i.width/i.height)>=1?(h=a,l=a/u):(h=a*u,l=a);var o=h>l?h:l;if(d=o>d?d:o,u>=1){var c=Math.ceil((h-l)/2),n=c;e.setData({cropperW:a,cropperH:a/u,cropperL:Math.ceil((a-a)/2),cropperT:Math.ceil((a-a/u)/2),cutL:c,cutT:0,cutR:n,cutB:0,imageW:h,imageH:l,scaleP:h/a,qualityWidth:v,innerAspectRadio:u})}else{var r=Math.ceil((l-h)/2),s=r;e.setData({cropperW:a*u,cropperH:a,cropperL:Math.ceil((a-a*u)/2),cropperT:Math.ceil((a-a)/2),cutL:0,cutT:r,cutR:0,cutB:s,imageW:h,imageH:l,scaleP:h/a,qualityWidth:v,innerAspectRadio:u})}e.setData({isShowImg:!0}),t.hideLoading()}})},contentStartMove:function(t){o=t.touches[0].pageX,c=t.touches[0].pageY},contentMoveing:function(t){var e=1*(o-t.touches[0].pageX),i=1*(c-t.touches[0].pageY);e>0?this.cutL-e<0&&(e=this.cutL):this.cutR+e<0&&(e=-this.cutR),i>0?this.cutT-i<0&&(i=this.cutT):this.cutB+i<0&&(i=-this.cutB),this.setData({cutL:this.cutL-e,cutT:this.cutT-i,cutR:this.cutR+e,cutB:this.cutB+i}),o=t.touches[0].pageX,c=t.touches[0].pageY},contentTouchEnd:function(){},getImageInfo:function(){var e=this;t.showLoading({title:"图片生成中..."});var i=t.createCanvasContext("myCanvas");i.drawImage(e.imageSrc,0,0,h,l),i.draw(!0,function(){var i=(e.cropperW-e.cutL-e.cutR)/e.cropperW*h,a=(e.cropperH-e.cutT-e.cutB)/e.cropperH*l,o=e.cutL/e.cropperW*h,c=e.cutT/e.cropperH*l;t.canvasToTempFilePath({x:o,y:c,width:i,height:a,destWidth:i,destHeight:a,quality:.5,canvasId:"myCanvas",success:function(e){t.hideLoading(),t.previewImage({current:"",urls:[e.tempFilePath]})}})})},dragStart:function(t){n=t.touches[0].pageX,r=t.touches[0].pageY,this.cutL,s=this.cutR,p=this.cutB,this.cutT},dragMove:function(t){t.target.dataset.drag;var e=1*(n-t.touches[0].pageX),i=1*(r-t.touches[0].pageY);Math.abs(e)>=Math.abs(i)&&(i=e),Math.abs(e)<Math.abs(i)&&(e=i);var a=Math.abs(e)>=Math.abs(i)?e:i;p+i<0&&(a=-p),s+e<0&&(a=-s);var o=p+a,c=s+a;this.setData({cutB:o,cutR:c})}}}}).call(e,i(2).default)},136:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"container"},[i("view",{staticClass:"page-body uni-content-info"},[i("view",{staticClass:"cropper-content"},[t.isShowImg?i("view",{staticClass:"uni-corpper",style:"width:"+t.cropperInitW+"px;height:"+t.cropperInitH+"px;background:#000"},[i("view",{staticClass:"uni-corpper-content",style:"width:"+t.cropperW+"px;height:"+t.cropperH+"px;left:"+t.cropperL+"px;top:"+t.cropperT+"px"},[i("image",{style:"width:"+t.cropperW+"px;height:"+t.cropperH+"px",attrs:{src:t.imageSrc}}),i("view",{staticClass:"uni-corpper-crop-box",style:"left:"+t.cutL+"px;top:"+t.cutT+"px;right:"+t.cutR+"px;bottom:"+t.cutB+"px",attrs:{eventid:"hzI-1"},on:{touchstart:function(e){e.stopPropagation(),t.contentStartMove(e)},touchmove:function(e){e.stopPropagation(),t.contentMoveing(e)},touchend:function(e){e.stopPropagation(),t.contentTouchEnd(e)}}},[i("view",{staticClass:"uni-cropper-view-box"},[i("view",{staticClass:"uni-cropper-dashed-h"}),i("view",{staticClass:"uni-cropper-dashed-v"}),i("view",{staticClass:"uni-cropper-line-t"}),i("view",{staticClass:"uni-cropper-line-r"}),i("view",{staticClass:"uni-cropper-line-b"}),i("view",{staticClass:"uni-cropper-line-l"}),i("view",{staticClass:"uni-cropper-point point-t"}),i("view",{staticClass:"uni-cropper-point point-tr"}),i("view",{staticClass:"uni-cropper-point point-r"}),i("view",{staticClass:"uni-cropper-point point-rb",attrs:{"data-drag":"rightBottom",eventid:"oye-0"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),i("view",{staticClass:"uni-cropper-point point-b"}),i("view",{staticClass:"uni-cropper-point point-bl"}),i("view",{staticClass:"uni-cropper-point point-l"}),i("view",{staticClass:"uni-cropper-point point-lt"})])])])]):t._e()]),i("view",{staticClass:"cropper-config"},[i("button",{staticStyle:{"margin-top":"30upx"},attrs:{type:"primary reverse",eventid:"7fh-2"},on:{click:t.getImage}},[t._v(" 选择图片 ")]),i("button",{staticStyle:{"margin-top":"30upx"},attrs:{type:"warn",eventid:"Yh9-3"},on:{click:t.getImageInfo}},[t._v(" 点击生成图片 ")])],1),i("canvas",{style:"position:absolute;border: 1px solid red; width:"+t.imageW+"px;height:"+t.imageH+"px;top:-9999px;left:-9999px;",attrs:{"canvas-id":"myCanvas"}})]),i("page-foot",{attrs:{name:t.name,mpcomid:"TY8-0"}})],1)};a._withStripped=!0;var o={render:a,staticRenderFns:[]};e.a=o}},[132]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/wode/bianji/bianji.js.map