require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([9],{117:function(t,e,o){"use strict";var a=r(o(1)),i=r(o(118));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))},118:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(120),i=o.n(a),r=o(121),c=!1;var n=function(t){c||o(119)},s=o(0)(i.a,r.a,n,null,null);s.options.__file="F:\\company-project-xtb\\kanguo\\kanguo\\pages\\wode\\bianji\\bianji.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] bianji.vue: functional components are not supported with templates, they should use render functions."),e.default=s.exports},119:function(t,e){},120:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=t.getSystemInfoSync(),a=o.screenWidth,i=void 0,r=void 0,c=(o.pixelRatio,void 0),n=void 0,s=void 0,p=void 0,u=void 0,d=void 0,g=void 0,h=void 0,v=void 0,l=100,f=o.screenWidth;e.default={data:function(){return{name:"杨大宝",imageSrc:"https://img-cdn-qiniu.dcloud.net.cn/demo_crop.jpg",isShowImg:!1,cropperInitW:a,cropperInitH:a,cropperW:a,cropperH:a,cropperL:0,cropperT:0,transL:0,transT:0,scaleP:0,imageW:0,imageH:0,cutL:0,cutT:0,cutB:a,cutR:"100%",qualityWidth:f,innerAspectRadio:1}},onLoad:function(t){},mounted:function(){},methods:{setData:function(t){var e=this;Object.keys(t).forEach(function(o){e.$set(e.$data,o,t[o])})},getImage:function(){var e=this;t.chooseImage({success:function(t){e.setData({imageSrc:t.tempFilePaths[0]}),e.loadImage()}})},loadImage:function(){var e=this;t.showLoading({title:"图片加载中..."}),t.getImageInfo({src:e.imageSrc,success:function(o){(g=o.width/o.height)>=1?(h=a,v=a/g):(h=a*g,v=a);var i=h>v?h:v;if(l=i>l?l:i,g>=1){var r=Math.ceil((a/g-(a/g-l))/2),c=r,n=Math.ceil((a-a+l)/2),s=n;e.setData({cropperW:a,cropperH:a/g,cropperL:Math.ceil((a-a)/2),cropperT:Math.ceil((a-a/g)/2),cutL:n,cutT:r,cutR:s,cutB:c,imageW:h,imageH:v,scaleP:h/a,qualityWidth:f,innerAspectRadio:g})}else{var p=Math.ceil((a*g-a*g)/2),u=p,d=Math.ceil((a-l)/2),m=d;e.setData({cropperW:a*g,cropperH:a,cropperL:Math.ceil((a-a*g)/2),cropperT:Math.ceil((a-a)/2),cutL:p,cutT:d,cutR:u,cutB:m,imageW:h,imageH:v,scaleP:h/a,qualityWidth:f,innerAspectRadio:g})}e.setData({isShowImg:!0}),t.hideLoading()}})},contentStartMove:function(t){i=t.touches[0].pageX,r=t.touches[0].pageY},contentMoveing:function(t){var e=1*(i-t.touches[0].pageX),o=1*(r-t.touches[0].pageY);e>0?this.cutL-e<0&&(e=this.cutL):this.cutR+e<0&&(e=-this.cutR),o>0?this.cutT-o<0&&(o=this.cutT):this.cutB+o<0&&(o=-this.cutB),this.setData({cutL:this.cutL-e,cutT:this.cutT-o,cutR:this.cutR+e,cutB:this.cutB+o}),i=t.touches[0].pageX,r=t.touches[0].pageY},contentTouchEnd:function(){},getImageInfo:function(){var e=this;t.showLoading({title:"图片生成中..."});var o=t.createCanvasContext("myCanvas");o.drawImage(e.imageSrc,0,0,h,v),o.draw(!0,function(){var o=(e.cropperW-e.cutL-e.cutR)/e.cropperW*h,a=(e.cropperH-e.cutT-e.cutB)/e.cropperH*v,i=e.cutL/e.cropperW*h,r=e.cutT/e.cropperH*v;t.canvasToTempFilePath({x:i,y:r,width:o,height:a,destWidth:o,destHeight:a,quality:.5,canvasId:"myCanvas",success:function(e){t.hideLoading(),t.previewImage({current:"",urls:[e.tempFilePath]})}})})},dragStart:function(t){c=t.touches[0].pageX,n=t.touches[0].pageY,s=this.cutL,u=this.cutR,d=this.cutB,p=this.cutT},dragMove:function(t){switch(t.target.dataset.drag){case"right":var e=1*(c-t.touches[0].pageX);u+e<0&&(e=-u),this.setData({cutR:u+e});break;case"left":e=1*(c-t.touches[0].pageX);s-e<0&&(e=s),s-e>this.cropperW-this.cutR&&(e=s-(this.cropperW-this.cutR)),this.setData({cutL:s-e});break;case"top":e=1*(n-t.touches[0].pageY);p-e<0&&(e=p),p-e>this.cropperH-this.cutB&&(e=p-(this.cropperH-this.cutB)),this.setData({cutT:p-e});break;case"bottom":e=1*(n-t.touches[0].pageY);d+e<0&&(e=-d),this.setData({cutB:d+e});break;case"rightBottom":var o=1*(c-t.touches[0].pageX),a=1*(n-t.touches[0].pageY);d+a<0&&(a=-d),u+o<0&&(o=-u);var i=d+a,r=u+o;this.setData({cutB:i,cutR:r})}}}}}).call(e,o(2).default)},121:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"container"},[o("view",{staticClass:"page-body uni-content-info"},[o("view",{staticClass:"cropper-content"},[t.isShowImg?o("view",{staticClass:"uni-corpper",style:"width:"+t.cropperInitW+"px;height:"+t.cropperInitH+"px;background:#000"},[o("view",{staticClass:"uni-corpper-content",style:"width:"+t.cropperW+"px;height:"+t.cropperH+"px;left:"+t.cropperL+"px;top:"+t.cropperT+"px"},[o("image",{style:"width:"+t.cropperW+"px;height:"+t.cropperH+"px",attrs:{src:t.imageSrc}}),o("view",{staticClass:"uni-corpper-crop-box",style:"left:"+t.cutL+"px;top:"+t.cutT+"px;right:"+t.cutR+"px;bottom:"+t.cutB+"px",attrs:{eventid:"saD-9"},on:{touchstart:function(e){e.stopPropagation(),t.contentStartMove(e)},touchmove:function(e){e.stopPropagation(),t.contentMoveing(e)},touchend:function(e){e.stopPropagation(),t.contentTouchEnd(e)}}},[o("view",{staticClass:"uni-cropper-view-box"},[o("view",{staticClass:"uni-cropper-dashed-h"}),o("view",{staticClass:"uni-cropper-dashed-v"}),o("view",{staticClass:"uni-cropper-line-t",attrs:{"data-drag":"top",eventid:"eWj-0"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-line-r",attrs:{"data-drag":"right",eventid:"Jy6-1"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-line-b",attrs:{"data-drag":"bottom",eventid:"6We-2"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-line-l",attrs:{"data-drag":"left",eventid:"ra3-3"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-point point-t",attrs:{"data-drag":"top",eventid:"nNp-4"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-point point-tr",attrs:{"data-drag":"topTight"}}),o("view",{staticClass:"uni-cropper-point point-r",attrs:{"data-drag":"right",eventid:"yXu-5"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-point point-rb",attrs:{"data-drag":"rightBottom",eventid:"6b2-6"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-point point-b",attrs:{"data-drag":"bottom",eventid:"PTe-7"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)},touchend:function(e){e.stopPropagation(),t.dragEnd(e)}}}),o("view",{staticClass:"uni-cropper-point point-bl",attrs:{"data-drag":"bottomLeft"}}),o("view",{staticClass:"uni-cropper-point point-l",attrs:{"data-drag":"left",eventid:"ueM-8"},on:{touchstart:function(e){e.stopPropagation(),t.dragStart(e)},touchmove:function(e){e.stopPropagation(),t.dragMove(e)}}}),o("view",{staticClass:"uni-cropper-point point-lt",attrs:{"data-drag":"leftTop"}})])])])]):t._e()]),o("view",{staticClass:"cropper-config"},[o("button",{staticStyle:{"margin-top":"30upx"},attrs:{type:"primary reverse",eventid:"vuW-10"},on:{click:t.getImage}},[t._v(" 选择图片 ")]),o("button",{staticStyle:{"margin-top":"30upx"},attrs:{type:"warn",eventid:"aRA-11"},on:{click:t.getImageInfo}},[t._v(" 点击生成图片 ")])],1),o("canvas",{style:"position:absolute;border: 1px solid red; width:"+t.imageW+"px;height:"+t.imageH+"px;top:-9999px;left:-9999px;",attrs:{"canvas-id":"myCanvas"}})]),o("page-foot",{attrs:{name:t.name,mpcomid:"1a4-0"}})],1)};a._withStripped=!0;var i={render:a,staticRenderFns:[]};e.a=i}},[117]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/wode/bianji/bianji.js.map